import{i as T,k as S,u as x,l as M,r as v}from"./index-D2Tr0q-m.js";function O(e){e.values.forEach(t=>t.stop())}function A(e,t){[...t].reverse().forEach(s=>{const i=e.getVariant(s);i&&S(e,i),e.variantChildren&&e.variantChildren.forEach(o=>{A(o,t)})})}function _(e,t){if(Array.isArray(t))return A(e,t);if(typeof t=="string")return A(e,[t]);S(e,t)}function B(){const e=new Set,t={subscribe(r){return e.add(r),()=>void e.delete(r)},start(r,s){const i=[];return e.forEach(o=>{i.push(T(o,r,{transitionOverride:s}))}),Promise.all(i)},set(r){return e.forEach(s=>{_(s,r)})},stop(){e.forEach(r=>{O(r)})},mount(){return()=>{t.stop()}}};return t}function L(){const e=x(B);return M(e.mount,[]),e}const D=L;var w=new Map,g=new WeakMap,I=0,$=void 0;function j(e){return e?(g.has(e)||(I+=1,g.set(e,I.toString())),g.get(e)):"0"}function z(e){return Object.keys(e).sort().filter(t=>e[t]!==void 0).map(t=>`${t}_${t==="root"?j(e.root):e[t]}`).toString()}function P(e){const t=z(e);let r=w.get(t);if(!r){const s=new Map;let i;const o=new IntersectionObserver(u=>{u.forEach(n=>{var a;const h=n.isIntersecting&&i.some(f=>n.intersectionRatio>=f);e.trackVisibility&&typeof n.isVisible>"u"&&(n.isVisible=h),(a=s.get(n.target))==null||a.forEach(f=>{f(h,n)})})},e);i=o.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),r={id:t,observer:o,elements:s},w.set(t,r)}return r}function W(e,t,r={},s=$){if(typeof window.IntersectionObserver>"u"&&s!==void 0){const a=e.getBoundingClientRect();return t(s,{isIntersecting:s,target:e,intersectionRatio:typeof r.threshold=="number"?r.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:i,observer:o,elements:u}=P(r),n=u.get(e)||[];return u.has(e)||u.set(e,n),n.push(t),o.observe(e),function(){n.splice(n.indexOf(t),1),n.length===0&&(u.delete(e),o.unobserve(e)),u.size===0&&(o.disconnect(),w.delete(i))}}function F({threshold:e,delay:t,trackVisibility:r,rootMargin:s,root:i,triggerOnce:o,skip:u,initialInView:n,fallbackInView:a,onChange:h}={}){var f;const[b,m]=v.useState(null),l=v.useRef(),[p,V]=v.useState({inView:!!n,entry:void 0});l.current=h,v.useEffect(()=>{if(u||!b)return;let d;return d=W(b,(E,y)=>{V({inView:E,entry:y}),l.current&&l.current(E,y),y.isIntersecting&&o&&d&&(d(),d=void 0)},{root:i,rootMargin:s,threshold:e,trackVisibility:r,delay:t},a),()=>{d&&d()}},[Array.isArray(e)?e.toString():e,b,i,s,o,u,r,a,t]);const R=(f=p.entry)==null?void 0:f.target,C=v.useRef();!b&&R&&!o&&!u&&C.current!==R&&(C.current=R,V({inView:!!n,entry:void 0}));const c=[m,p.inView,p.entry];return c.ref=c[0],c.inView=c[1],c.entry=c[2],c}export{F as a,D as u};
